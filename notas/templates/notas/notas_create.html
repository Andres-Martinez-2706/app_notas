<!-- myapp/templates/create_note.html -->
{% extends 'notas/base.html' %}
{% load static %}

{% block title %}Crear Nueva Nota - Mi AplicaciÃ³n{% endblock %}

{% block head %}

    <link rel="stylesheet" href="{% static 'css/create_note.css' %}">
{% endblock %}

{% block content %}
    <div class="create-note-page">
        <div class="form-header">
            <h2>Crear Nueva Nota</h2>
            <button type="submit" form="noteForm" class="btn btn-save">
                <span class="icon">ðŸ’¾</span> Guardar
            </button>
        </div>

        <form method="post" enctype="multipart/form-data" class="note-form" id="noteForm">
            {% csrf_token %}
            <div class="form-field">
                <label for="id_titulo">TÃ­tulo:</label>
                {{ form.titulo }}
            </div>
            <div class="form-field">
                <label for="id_descripcion">DescripciÃ³n:</label>
                {{ form.descripcion }}
            </div>
            <div class="form-field">
                <label for="id_imagen">Imagen:</label>
                {{ form.imagen }}
                <div class="image-preview">
                    <img id="preview" src="#" alt="Vista previa" class="preview-image">
                </div>
            </div>
        </form>
    </div>

    {{ form.media }}

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const inputImagen = document.getElementById('id_imagen');
            const preview = document.getElementById('preview');
        
            inputImagen.addEventListener('change', function () {
                const file = this.files[0];
        
                if (file) {
                    const reader = new FileReader();
        
                    reader.onload = function (e) {
                        preview.src = e.target.result;
                        preview.style.display = 'block';
                    };
        
                    reader.readAsDataURL(file);
                } else {
                    preview.src = "#";
                    preview.style.display = 'none';
                }
            });
        });
    </script>
{% endblock %}